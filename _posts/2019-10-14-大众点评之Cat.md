---
layout: post
title:  "大众点评之Cat"
date:   2019-10-14
desc: "大众点评,Cat"
keywords: "大众点评,Cat"
categories: [Distributed]
tags: [Distributed]
icon: icon-html
---

## 模块
- cat-client：客户端，上报监控数据
- cat-consumer：服务端，收集监控数据进行统计分析，构建统计报表
- cat-alarm：实时告警
- cat-hadoop：数据存储
- cat-home：管理端，报表展示、配置管理等

## 监控模型
- Transaction:适合记录跨越系统边界的程序访问行为，比如远程调用，数据库调用，也适合执行时间较长的的业务逻辑监控，Transaction用来记录一段代码的执行时间和次数
- Event：用来记录一件事发生的次数，和Transaction相比，少了时间的统计
- Heartbeat：程序内定期产生的统计信息
- Metric：用于记录业务指标，指标可能包含对一个指标记录次数，记录平均值，记录总和，业务指标最低统计粒度为一分钟

## 集成Cat
- 引入CAT客户端的jar包
- 设置基本的环境(确保应用程序有权限并且能够成功访问（读写）)
    - /data/appdatas/cat/client.xml
    - /data/applogs/cat/
- 在resource/META-INF/app.properties中设置app.name=test(自己的程序名称)
- 埋点
    - 对于请求的链路追踪（URL），可以采用CatFilter的方式，设置URL拦截的路径
    - 对于一些方法的追踪，可以使用切面的模式，切点设置为需要拦截的对应的方法即可